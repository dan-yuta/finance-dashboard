# 家計管理アプリ 使い方ガイド

## 概要

個人の資産・負債（BS）と収支（PL）を毎月記録し、視覚的にわかりやすいダッシュボードで財務の健康度を確認できるアプリです。

**📌 一人法人分と個人での利用を合算して管理しています。**

## 起動方法

1. `index.html` をダブルクリック
2. Chrome または Edge で開く（File System Access API が必要）
3. 初回は「🔄 最新データを読み込み」→ `001_データ` フォルダを選択

## タブ一覧

### 📊 ダッシュボード
- **健康度ゲージ**: 0-100点で財務の健全性をスコア化
  - 0-30点（赤）: 危険 / 31-50点（橙）: 注意 / 51-70点（黄）: 改善中 / 71-100点（緑）: 良好
- **サマリーカード**: 純資産・総資産・総負債・月間収支を一目で確認
  - ミニスパークラインで直近6ヶ月の推移を表示
  - 前月比パーセントバッジ付き
- **ローン返済プログレスバー**: 返済進捗と完済予測
- **ローン完済カウントダウン**: 残り月数・完済予定日・返済済み額を表示
- **信号機インジケーター**: 3つの指標を信号機で表示
- **予算進捗**: 設定した月間予算に対する達成率をプログレスバーで表示
- **目標進捗**: 設定した目標（ローン完済・貯蓄）への達成率を表示
- **資産内訳・支出内訳**: ドーナツチャートで構成比を表示
- **自動コメント**: 絵文字付きで財務状況をわかりやすく解説
- **◀▶ 月ナビゲーション**: ボタンで前月・翌月に素早く移動

### 💰 PL詳細
- 収入・支出の内訳テーブル（構成比・前月比付き）
- 収支バランスチャート・支出内訳ドーナツ
- 自動コメントで収支状況を解説

### 🏦 BS詳細
- 資産・負債の内訳テーブル（構成比・前月比付き）
- 資産構成ドーナツ・資産vs負債バーチャート
- 自動コメントでBS状況を解説

### ✏️ 月次入力
- 年月を選択してBS・PLデータを入力
- 前月の値と差分がリアルタイムで表示される
- 「📋 前月コピー」で前月の値を一括コピー可能
- 入力時にバリデーション（負値警告・大幅変動警告）
- 入力後「💾 この月のデータを保存」で確定

### 📈 推移グラフ
- 純資産の推移（ラインチャート）
- 資産 vs 負債（棒グラフ）
- 月次収支（棒グラフ）
- ローン残高の推移（ライン + 予測破線）

### 📅 年間サマリー
- **月別収支ヒートマップ**: 12ヶ月の収支を色分けで一覧表示
- **月別データ一覧**: 年間の全データをテーブルで表示（年間合計付き）
- **2ヶ月比較**: 任意の2ヶ月を選んでBS・PLを並べて比較

### ⚙️ 設定
- ローン初期残高・年利の設定
- 月間予算設定（支出カテゴリ別）
- 目標設定（ローン完済・貯蓄目標）
- 口座の追加・削除
- 収支カテゴリの追加・削除

## 便利機能

### CSVエクスポート
- 「📤 CSVエクスポート」ボタンで全データをCSVファイルに出力
- Excel（日本語対応BOM付き）で開ける

### 未保存データの警告
- データ変更後にページを離れようとすると警告を表示
- ヘッダーに「● 未保存の変更あり」が表示される

### 最終保存日時
- ヘッダーに最終ファイル保存日時を常時表示

## データ管理

### 保存
- 「💾 データを保存」ボタンで `001_データ` フォルダにJSON保存
- ファイル名: `finance_YYYYMMDD_HHMMSS.json`（タイムスタンプ付き）
- 上書きされないため、過去データはバックアップとして残る

### 読み込み
- アプリ起動時に最新のJSONファイルを自動読み込み
- 「🔄 最新データを読み込み」で手動再読み込み

## 毎月の運用フロー

1. アプリを開く（ダッシュボードで前月を確認）
2. 「✏️ 月次入力」タブへ移動
3. 当月を選択し、「📋 前月コピー」で値をコピー
4. 各口座残高・支出額を実際の値に修正
5. 「💾 この月のデータを保存」をクリック
6. 「💾 データを保存」でJSONファイルに保存
7. ダッシュボードで結果を確認

## 初期データ

2026年2月のデータがプリセットされています:
- 楽天銀行: ¥437,468
- みずほ銀行: ¥40,836（CCAGI支払済）
- ゆうちょ銀行: ¥24,150
- GMOあおぞら（法人）: ¥0
- 三井住友カードローン: ¥3,466,152
- クレカ未払残高: ¥0
- 生活固定費: ¥104,000
- CCAGI支払: ¥660,000（支出として計上）

## 注意事項

- **Chrome または Edge 推奨**（File System Access API 必須）
- Firefox, Safari では動作しません
- データはローカルに保存され、外部には送信されません
- 「💾 データを保存」を押さない限り、ファイルには保存されません
